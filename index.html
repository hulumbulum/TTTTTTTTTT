<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Иван Иванов | Senior Frontend Developer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="particles-container" id="particles"></div>
    
    <section class="hero-section" id="home">
        <div class="container">
            <div class="corner-links">
                <a href="#contact" class="contact-link">
                    <span>КОНТАКТЫ</span>
                    <div class="link-line"></div>
                </a>
            </div>
            
            <div class="hero-content">
                <div class="hero-left">
                    <div class="greeting">
                        <span class="greeting-line"></span>
                        <span>ПРИВЕТ, Я</span>
                    </div>
                    
                    <h1 class="hero-title">
                        <span class="first-name">ИВАН</span>
                        <span class="last-name">ИВАНОВ</span>
                    </h1>
                    
                    <p class="hero-subtitle">
                        Senior Frontend Developer
                        <span class="title-accent"> & UI/UX Designer</span>
                    </p>
                    
                    <p class="hero-description">
                        Создаю современные цифровые продукты с фокусом на 
                        пользовательский опыт и технологическую эффективность.
                        <span class="highlight-text">5+ лет опыта.</span>
                    </p>
                    
                    <div class="quick-actions">
                        <a href="#portfolio" class="action-btn primary-btn">
                            <span>ПОРТФОЛИО</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        <a href="#about" class="action-btn secondary-btn">
                            <span>ОБО МНЕ</span>
                            <i class="fas fa-user"></i>
                        </a>
                    </div>
                    
                    <div class="social-strip">
                        <div class="social-item">
                            <div class="social-icon">
                                <i class="fab fa-github"></i>
                            </div>
                            <span class="social-text">GitHub</span>
                        </div>
                        <div class="social-item">
                            <div class="social-icon">
                                <i class="fab fa-linkedin-in"></i>
                            </div>
                            <span class="social-text">LinkedIn</span>
                        </div>
                        <div class="social-item">
                            <div class="social-icon">
                                <i class="fab fa-behance"></i>
                            </div>
                            <span class="social-text">Behance</span>
                        </div>
                        <div class="social-item">
                            <div class="social-icon">
                                <i class="fab fa-dribbble"></i>
                            </div>
                            <span class="social-text">Dribbble</span>
                        </div>
                    </div>
                </div>
                
                <div class="hero-right">
                    <div class="image-container">
                        <div class="image-frame">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                 alt="Иван Иванов" class="main-photo">
                        </div>
                        <div class="image-overlay">
                            <div class="overlay-text">
                                <h3>В работе</h3>
                                <p>Next.js проект</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="scroll-hint">
                <div class="scroll-line"></div>
                <span>СКРОЛЛ</span>
            </div>
        </div>
    </section>

    <section class="about-section section" id="about">
        <div class="container">
            <div class="section-header">
                <div class="section-number">01</div>
                <h2 class="section-title">
                    <span class="title-word">ОБО</span>
                    <span class="title-word accent">МНЕ</span>
                </h2>
                <p class="section-subtitle">Мой путь в разработке</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" data-count="50">0</div>
                    <div class="stat-label">Проектов</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-count="5">0</div>
                    <div class="stat-label">Лет опыта</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-count="30">0</div>
                    <div class="stat-label">Клиентов</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-count="15">0</div>
                    <div class="stat-label">Наград</div>
                </div>
            </div>
            
            <div class="about-content">
                <div class="about-text">
                    <h3>Моя философия разработки</h3>
                    <p>Я считаю, что отличный продукт — это сочетание красивого дизайна, безупречного кода и глубокого понимания потребностей пользователя.</p>
                    <p>Специализируюсь на создании современных веб-приложений с использованием React, TypeScript и современных инструментов разработки.</p>
                    <p>Постоянно изучаю новые технологии и подходы, чтобы создавать продукты, которые не только решают задачи, но и доставляют удовольствие от использования.</p>
                    
                    <div class="about-quote">
                        <i class="fas fa-quote-left"></i>
                        <p>Код — это поэзия для машин. Хороший код читается как хорошая книга.</p>
                    </div>
                </div>
                
                <div class="about-photo">
                    <div class="photo-frame">
                        <img src="https://images.unsplash.com/photo-1549692520-acc6669e2f0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                             alt="Иван за работой">
                        <div class="photo-overlay">
                            <span>В процессе работы</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modern-timeline">
                <div class="timeline-item">
                    <div class="timeline-year">
                        <span>2018</span>
                        <div class="year-line"></div>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-card">
                            <div class="timeline-header">
                                <h3>Начало карьеры</h3>
                                <span class="timeline-badge">Junior Developer</span>
                            </div>
                            <p>Первая позиция в веб-студии. Изучение основ HTML/CSS, JavaScript. Работа над первыми коммерческими проектами.</p>
                            <div class="timeline-tags">
                                <span class="tech-tag">HTML</span>
                                <span class="tech-tag">CSS</span>
                                <span class="tech-tag">JavaScript</span>
                                <span class="tech-tag">jQuery</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-year">
                        <span>2020</span>
                        <div class="year-line"></div>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-card">
                            <div class="timeline-header">
                                <h3>Специализация на Frontend</h3>
                                <span class="timeline-badge">Middle Developer</span>
                            </div>
                            <p>Переход на React и TypeScript. Работа над крупными проектами для международных клиентов. Изучение архитектуры приложений.</p>
                            <div class="timeline-tags">
                                <span class="tech-tag">React</span>
                                <span class="tech-tag">TypeScript</span>
                                <span class="tech-tag">Redux</span>
                                <span class="tech-tag">Webpack</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-year">
                        <span>2022</span>
                        <div class="year-line"></div>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-card">
                            <div class="timeline-header">
                                <h3>Лидерство и архитектура</h3>
                                <span class="timeline-badge">Senior Developer</span>
                            </div>
                            <p>Руководство командой разработчиков. Проектирование архитектуры сложных приложений. Внедрение современных практик и методологий.</p>
                            <div class="timeline-tags">
                                <span class="tech-tag">Next.js</span>
                                <span class="tech-tag">GraphQL</span>
                                <span class="tech-tag">Microservices</span>
                                <span class="tech-tag">AWS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

   <section class="portfolio-section section" id="portfolio">
    <div class="container">
        <div class="section-header">
            <div class="section-number">02</div>
            <h2 class="section-title">
                <span class="title-word">РАБОТЫ</span>
            </h2>
            <p class="section-subtitle">Интерактивные демонстрации проектов</p>
        </div>
        
        <div class="portfolio-filters">
            <button class="filter-btn active" data-filter="all">ВСЕ</button>
            <button class="filter-btn" data-filter="utility">УТИЛИТЫ</button>
            <button class="filter-btn" data-filter="productivity">ПРОДУКТИВНОСТЬ</button>
        </div>
        
        <div class="portfolio-grid">
            <!-- Калькулятор -->
            <div class="project-card interactive-app" data-category="utility">
                <div class="app-container">
                    <div class="app-header">
                        <h3>Интерактивный калькулятор</h3>
                        <p>React + CSS Animations</p>
                    </div>
                    <div class="calculator-app">
						<div class="calculator-display" id="calcDisplay">0</div>
						<div class="calculator-buttons">
							<button class="calc-btn operator" data-action="clear">C</button>
							<button class="calc-btn operator" data-action="backspace">⌫</button>
							<button class="calc-btn operator" data-action="%">%</button>
							<button class="calc-btn operator" data-action="/">/</button>
							
							<button class="calc-btn" data-number="7">7</button>
							<button class="calc-btn" data-number="8">8</button>
							<button class="calc-btn" data-number="9">9</button>
							<button class="calc-btn operator" data-action="*">×</button>
							
							<button class="calc-btn" data-number="4">4</button>
							<button class="calc-btn" data-number="5">5</button>
							<button class="calc-btn" data-number="6">6</button>
							<button class="calc-btn operator" data-action="-">-</button>
							
							<button class="calc-btn" data-number="1">1</button>
							<button class="calc-btn" data-number="2">2</button>
							<button class="calc-btn" data-number="3">3</button>
							<button class="calc-btn operator" data-action="+">+</button>
							
							<button class="calc-btn zero" data-number="0">0</button>
							<button class="calc-btn" data-action=".">.</button>
							<button class="calc-btn equals" data-action="=">=</button>
							<!-- Убираем дублирующую кнопку = -->
						</div>
					</div>
                    <div class="app-info">
                        <p>Полнофункциональный калькулятор с анимациями и всеми основными операциями</p>
                        <div class="app-tech">
                            <span>JavaScript</span>
                            <span>CSS3</span>
                            <span>Анимации</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Погодный виджет -->
            <div class="project-card interactive-app" data-category="utility">
                <div class="app-container">
                    <div class="app-header">
                        <h3>Погодный виджет</h3>
                        <p>API + JavaScript</p>
                    </div>
                    <div class="weather-app">
                        <div class="weather-search">
                            <input type="text" id="cityInput" placeholder="Введите город...">
                            <button id="searchWeather">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        <div class="weather-display">
                            <div class="weather-icon">
                                <i class="fas fa-sun" id="weatherIcon"></i>
                            </div>
                            <div class="weather-info">
                                <h2 id="cityName">Москва</h2>
                                <div class="temperature" id="temperature">24°C</div>
                                <div class="weather-desc" id="weatherDesc">Солнечно</div>
                                <div class="weather-details">
                                    <div class="detail">
                                        <i class="fas fa-wind"></i>
                                        <span id="windSpeed">5 м/с</span>
                                    </div>
                                    <div class="detail">
                                        <i class="fas fa-tint"></i>
                                        <span id="humidity">65%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="weather-forecast">
                            <div class="forecast-day">
                                <div>Пн</div>
                                <i class="fas fa-cloud-sun"></i>
                                <div>22°</div>
                            </div>
                            <div class="forecast-day">
                                <div>Вт</div>
                                <i class="fas fa-cloud"></i>
                                <div>20°</div>
                            </div>
                            <div class="forecast-day">
                                <div>Ср</div>
                                <i class="fas fa-sun"></i>
                                <div>25°</div>
                            </div>
                            <div class="forecast-day">
                                <div>Чт</div>
                                <i class="fas fa-cloud-rain"></i>
                                <div>18°</div>
                            </div>
                        </div>
                    </div>
                    <div class="app-info">
                        <p>Виджет погоды с прогнозом на 4 дня и поиском по городам</p>
                        <div class="app-tech">
                            <span>API</span>
                            <span>JavaScript</span>
                            <span>LocalStorage</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Todo-лист -->
            <div class="project-card interactive-app" data-category="productivity">
                <div class="app-container">
                    <div class="app-header">
                        <h3>Менеджер задач</h3>
                        <p>React + LocalStorage</p>
                    </div>
                    <div class="todo-app">
                        <div class="todo-input">
                            <input type="text" id="todoInput" placeholder="Добавить новую задачу...">
                            <button id="addTodo">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="todo-filters">
                            <button class="todo-filter active" data-filter="all">Все</button>
                            <button class="todo-filter" data-filter="active">Активные</button>
                            <button class="todo-filter" data-filter="completed">Завершенные</button>
                        </div>
                        <div class="todo-list" id="todoList">
                            <!-- Задачи будут добавляться через JS -->
                        </div>
                        <div class="todo-stats">
                            <span id="itemsLeft">0 задач осталось</span>
                            <button id="clearCompleted">Очистить завершенные</button>
                        </div>
                    </div>
                    <div class="app-info">
                        <p>Менеджер задач с фильтрацией и сохранением в браузере</p>
                        <div class="app-tech">
                            <span>JavaScript</span>
                            <span>LocalStorage</span>
                            <span>CSS Animations</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

    <section class="skills-section section" id="skills">
        <div class="container">
            <div class="section-header">
                <div class="section-number">03</div>
                <h2 class="section-title">
                    <span class="title-word">НАВЫКИ</span>
                </h2>
                <p class="section-subtitle">Технологии и инструменты</p>
            </div>
            
            <div class="skills-grid">
                <div class="skill-category">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3>Frontend</h3>
                    </div>
                    <div class="skills-list">
                        <div class="skill-item">
                            <span>React</span>
                            <div class="skill-level">
                                <div class="level-fill" data-level="95"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <span>TypeScript</span>
                            <div class="skill-level">
                                <div class="level-fill" data-level="90"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <span>Next.js</span>
                            <div class="skill-level">
                                <div class="level-fill" data-level="85"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="skill-category">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <h3>Backend</h3>
                    </div>
                    <div class="skills-list">
                        <div class="skill-item">
                            <span>Node.js</span>
                            <div class="skill-level">
                                <div class="level-fill" data-level="85"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <span>GraphQL</span>
                            <div class="skill-level">
                                <div class="level-fill" data-level="80"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <span>PostgreSQL</span>
                            <div class="skill-level">
                                <div class="level-fill" data-level="75"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="contact-section section" id="contact">
        <div class="container">
            <div class="contact-grid">
                <div class="contact-left">
                    <div class="section-header">
                        <div class="section-number">04</div>
                        <h2 class="section-title">
                            <span class="title-word">КОНТАКТЫ</span>
                        </h2>
                        <p class="section-subtitle">Давайте работать вместе</p>
                    </div>
                    
                    <div class="contact-info">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div>
                                <h3>Email</h3>
                                <a href="mailto:ivan@example.com">ivan@example.com</a>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div>
                                <h3>Телефон</h3>
                                <a href="tel:+79991234567">+7 (999) 123-45-67</a>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div>
                                <h3>Локация</h3>
                                <p>Москва, Россия</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="vertical-social">
                        <a href="#" class="social-link">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-telegram-plane"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-codepen"></i>
                        </a>
                    </div>
                </div>
                
                <div class="contact-right">
                    <form class="contact-form">
                        <div class="form-group">
                            <input type="text" placeholder="Ваше имя" required>
                            <input type="email" placeholder="Email" required>
                        </div>
                        <input type="text" placeholder="Тема" required>
                        <textarea placeholder="Сообщение" rows="6" required></textarea>
                        <button type="submit" class="submit-btn">
                            <span>ОТПРАВИТЬ</span>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <h3>ИВАН ИВАНОВ</h3>
                    <p>Senior Frontend Developer</p>
                </div>
                <div class="footer-right">
                    <p>&copy; 2023. Все права защищены</p>
                    <p>Сделано с <i class="fas fa-heart"></i> и кодом</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Улучшенный JavaScript с исправлениями и новыми приложениями
        document.addEventListener('DOMContentLoaded', function() {
            // 1. Создаем частицы фона
            function createParticles() {
                const container = document.getElementById('particles');
                if (!container) return;
                
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    const size = Math.random() * 3 + 1;
                    const posX = Math.random() * 100;
                    const posY = Math.random() * 100;
                    
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${posX}%`;
                    particle.style.top = `${posY}%`;
                    
                    container.appendChild(particle);
                }
            }
            
            // 2. Анимация счетчиков
            function animateCounters() {
                const counters = document.querySelectorAll('.stat-number');
                
                counters.forEach(counter => {
                    const target = parseInt(counter.getAttribute('data-count'));
                    let count = 0;
                    const speed = 200;
                    
                    const updateCount = () => {
                        if (count < target) {
                            count++;
                            counter.innerText = count;
                            setTimeout(updateCount, 3000 / speed);
                        }
                    };
                    
                    updateCount();
                });
            }
            
            // 3. Анимация появления элементов
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        
                        if (entry.target.classList.contains('about-section')) {
                            setTimeout(animateCounters, 300);
                        }
                        
                        // Анимация навыков
                        if (entry.target.classList.contains('skills-section')) {
                            const skillBars = document.querySelectorAll('.level-fill');
                            skillBars.forEach(bar => {
                                const level = bar.getAttribute('data-level');
                                bar.style.width = `${level}%`;
                                bar.style.transition = 'width 1.5s ease-out';
                            });
                        }
                    }
                });
            }, { threshold: 0.1 });
            
            // Наблюдаем за всеми секциями и элементами
            document.querySelectorAll('section, .timeline-item, .project-card, .stat-card, .skill-category').forEach(element => {
                observer.observe(element);
            });
            
            // 4. Плавная прокрутка
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
                                    // 5. Простая плавная фильтрация
            let animationTimeout;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Отменяем предыдущую анимацию
                    if (animationTimeout) clearTimeout(animationTimeout);
                    
                    // Меняем активную кнопку
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    const projects = document.querySelectorAll('.project-card');
                    
                    // Шаг 1: Плавно скрываем все карточки
                    projects.forEach(project => {
                        project.style.opacity = '0';
                        project.style.transform = 'translateY(20px) scale(0.95)';
                        project.style.pointerEvents = 'none';
                    });
                    
                    // Шаг 2: После скрытия меняем display и показываем нужные
                    animationTimeout = setTimeout(() => {
                        // Скрываем все
                        projects.forEach(project => {
                            project.style.display = 'none';
                        });
                        
                        // Показываем нужные
                        projects.forEach(project => {
                            const shouldShow = filter === 'all' || 
                                             project.dataset.category === filter;
                            
                            if (shouldShow) {
                                project.style.display = 'block';
                            }
                        });
                        
                        // Шаг 3: Плавно показываем нужные карточки
                        const visibleProjects = document.querySelectorAll(
                            `.project-card[style*="display: block"]`
                        );
                        
                        visibleProjects.forEach((project, index) => {
                            setTimeout(() => {
                                project.style.opacity = '1';
                                project.style.transform = 'translateY(0) scale(1)';
                                project.style.pointerEvents = 'auto';
                            }, index * 150);
                        });
                    }, 300);
                });
            });
            
            // 6. Полнофункциональный калькулятор
            class Calculator {
                constructor() {
                    this.display = document.getElementById('calcDisplay');
                    this.currentInput = '0';
                    this.previousInput = '';
                    this.operation = null;
                    this.waitingForNewInput = false;
                    
                    this.init();
                }
                
                init() {
                    document.querySelectorAll('.calc-btn').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const action = button.dataset.action;
                            const number = button.dataset.number;
                            
                            if (number !== undefined) {
                                this.inputNumber(number);
                            } else if (action !== undefined) {
                                this.handleAction(action);
                            }
                            
                            this.updateDisplay();
                        });
                    });
                }
                
                inputNumber(num) {
                    if (this.waitingForNewInput) {
                        this.currentInput = num;
                        this.waitingForNewInput = false;
                    } else {
                        this.currentInput = this.currentInput === '0' ? num : this.currentInput + num;
                    }
                }
                
                handleAction(action) {
                    switch(action) {
                        case 'clear':
                            this.clear();
                            break;
                        case 'backspace':
                            this.backspace();
                            break;
                        case '.':
                            this.inputDecimal();
                            break;
                        case '=':
                            this.calculate();
                            break;
                        case '+':
                        case '-':
                        case '*':
                        case '/':
                        case '%':
                            this.setOperation(action);
                            break;
                    }
                }
                
                inputDecimal() {
                    if (this.waitingForNewInput) {
                        this.currentInput = '0.';
                        this.waitingForNewInput = false;
                        return;
                    }
                    
                    if (!this.currentInput.includes('.')) {
                        this.currentInput += '.';
                    }
                }
                
                clear() {
                    this.currentInput = '0';
                    this.previousInput = '';
                    this.operation = null;
                    this.waitingForNewInput = false;
                }
                
                backspace() {
                    if (this.currentInput.length > 1) {
                        this.currentInput = this.currentInput.slice(0, -1);
                    } else {
                        this.currentInput = '0';
                    }
                }
                
                setOperation(op) {
                    if (this.operation !== null && !this.waitingForNewInput) {
                        this.calculate();
                    }
                    
                    this.previousInput = this.currentInput;
                    this.operation = op;
                    this.waitingForNewInput = true;
                }
                
                calculate() {
                    if (this.operation === null || this.waitingForNewInput) {
                        return;
                    }
                    
                    const prev = parseFloat(this.previousInput);
                    const current = parseFloat(this.currentInput);
                    let result;
                    
                    switch(this.operation) {
                        case '+':
                            result = prev + current;
                            break;
                        case '-':
                            result = prev - current;
                            break;
                        case '*':
                            result = prev * current;
                            break;
                        case '/':
                            result = prev / current;
                            break;
                        case '%':
                            result = prev % current;
                            break;
                        default:
                            return;
                    }
                    
                    // Ограничиваем количество знаков после запятой
                    result = Math.round(result * 1000000) / 1000000;
                    
                    this.currentInput = result.toString();
                    this.operation = null;
                    this.previousInput = '';
                    this.waitingForNewInput = true;
                }
                
                updateDisplay() {
                    this.display.textContent = this.currentInput;
                }
            }
            
            // 7. Погодный виджет
            class WeatherApp {
                constructor() {
                    this.cityInput = document.getElementById('cityInput');
                    this.searchBtn = document.getElementById('searchWeather');
                    this.cityName = document.getElementById('cityName');
                    this.temperature = document.getElementById('temperature');
                    this.weatherDesc = document.getElementById('weatherDesc');
                    this.windSpeed = document.getElementById('windSpeed');
                    this.humidity = document.getElementById('humidity');
                    this.weatherIcon = document.getElementById('weatherIcon');
                    
                    // Данные для демо (в реальном приложении здесь был бы API запрос)
                    this.weatherData = {
                        'москва': {
                            temp: 24,
                            desc: 'Солнечно',
                            wind: 5,
                            humidity: 65,
                            icon: 'fa-sun'
                        },
                        'санкт-петербург': {
                            temp: 18,
                            desc: 'Облачно',
                            wind: 7,
                            humidity: 80,
                            icon: 'fa-cloud'
                        },
                        'казань': {
                            temp: 22,
                            desc: 'Переменная облачность',
                            wind: 4,
                            humidity: 70,
                            icon: 'fa-cloud-sun'
                        },
                        'сочи': {
                            temp: 28,
                            desc: 'Ясно',
                            wind: 3,
                            humidity: 75,
                            icon: 'fa-sun'
                        },
                        'новосибирск': {
                            temp: 16,
                            desc: 'Дождь',
                            wind: 8,
                            humidity: 85,
                            icon: 'fa-cloud-rain'
                        }
                    };
                    
                    this.init();
                }
                
                init() {
                    this.searchBtn.addEventListener('click', () => this.searchWeather());
                    this.cityInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.searchWeather();
                        }
                    });
                    
                    // Загрузка последнего города из localStorage
                    const lastCity = localStorage.getItem('lastWeatherCity') || 'москва';
                    this.cityInput.value = lastCity;
                    this.updateWeather(lastCity);
                }
                
                searchWeather() {
                    const city = this.cityInput.value.toLowerCase().trim();
                    if (city) {
                        this.updateWeather(city);
                        localStorage.setItem('lastWeatherCity', city);
                    }
                }
                
                updateWeather(city) {
                    const data = this.weatherData[city];
                    
                    if (data) {
                        this.cityName.textContent = city.charAt(0).toUpperCase() + city.slice(1);
                        this.temperature.textContent = `${data.temp}°C`;
                        this.weatherDesc.textContent = data.desc;
                        this.windSpeed.textContent = `${data.wind} м/с`;
                        this.humidity.textContent = `${data.humidity}%`;
                        this.weatherIcon.className = `fas ${data.icon}`;
                        
                        // Анимация изменения
                        this.cityName.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            this.cityName.style.transform = 'scale(1)';
                        }, 300);
                    } else {
                        // Если город не найден
                        this.cityName.textContent = 'Город не найден';
                        this.temperature.textContent = '--°C';
                        this.weatherDesc.textContent = 'Данные отсутствуют';
                        this.windSpeed.textContent = '-- м/с';
                        this.humidity.textContent = '--%';
                        this.weatherIcon.className = 'fas fa-question';
                    }
                }
            }
            
            // 8. Todo-приложение
            class TodoApp {
                constructor() {
                    this.todoInput = document.getElementById('todoInput');
                    this.addBtn = document.getElementById('addTodo');
                    this.todoList = document.getElementById('todoList');
                    this.itemsLeft = document.getElementById('itemsLeft');
                    this.clearCompletedBtn = document.getElementById('clearCompleted');
                    this.filterBtns = document.querySelectorAll('.todo-filter');
                    
                    this.todos = JSON.parse(localStorage.getItem('todos')) || [];
                    this.currentFilter = 'all';
                    
                    this.init();
                }
                
                init() {
                    this.addBtn.addEventListener('click', () => this.addTodo());
                    this.todoInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.addTodo();
                        }
                    });
                    
                    this.clearCompletedBtn.addEventListener('click', () => this.clearCompleted());
                    
                    this.filterBtns.forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            this.filterBtns.forEach(b => b.classList.remove('active'));
                            e.target.classList.add('active');
                            this.currentFilter = e.target.dataset.filter;
                            this.renderTodos();
                        });
                    });
                    
                    this.renderTodos();
                }
                
                addTodo() {
                    const text = this.todoInput.value.trim();
                    if (text) {
                        const todo = {
                            id: Date.now(),
                            text: text,
                            completed: false,
                            createdAt: new Date().toISOString()
                        };
                        
                        this.todos.unshift(todo);
                        this.saveTodos();
                        this.renderTodos();
                        this.todoInput.value = '';
                        
                        // Анимация добавления
                        const firstTodo = this.todoList.firstElementChild;
                        if (firstTodo) {
                            firstTodo.style.transform = 'translateY(-20px)';
                            firstTodo.style.opacity = '0';
                            setTimeout(() => {
                                firstTodo.style.transform = 'translateY(0)';
                                firstTodo.style.opacity = '1';
                            }, 10);
                        }
                    }
                }
                
                toggleTodo(id) {
                    const todo = this.todos.find(t => t.id === id);
                    if (todo) {
                        todo.completed = !todo.completed;
                        this.saveTodos();
                        this.renderTodos();
                    }
                }
                
                deleteTodo(id) {
                    this.todos = this.todos.filter(t => t.id !== id);
                    this.saveTodos();
                    this.renderTodos();
                }
                
                clearCompleted() {
                    this.todos = this.todos.filter(t => !t.completed);
                    this.saveTodos();
                    this.renderTodos();
                }
                
                getFilteredTodos() {
                    switch(this.currentFilter) {
                        case 'active':
                            return this.todos.filter(t => !t.completed);
                        case 'completed':
                            return this.todos.filter(t => t.completed);
                        default:
                            return this.todos;
                    }
                }
                
                renderTodos() {
                    this.todoList.innerHTML = '';
                    const filteredTodos = this.getFilteredTodos();
                    
                    if (filteredTodos.length === 0) {
                        const emptyState = document.createElement('div');
                        emptyState.className = 'empty-todo';
                        emptyState.innerHTML = `
                            <i class="fas fa-clipboard-list"></i>
                            <p>Нет задач</p>
                        `;
                        this.todoList.appendChild(emptyState);
                    } else {
                        filteredTodos.forEach(todo => {
                            const todoElement = document.createElement('div');
                            todoElement.className = `todo-item ${todo.completed ? 'completed' : ''}`;
                            todoElement.innerHTML = `
                                <div class="todo-checkbox" data-id="${todo.id}">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="todo-text">${todo.text}</div>
                                <div class="todo-actions">
                                    <button class="todo-delete" data-id="${todo.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                            
                            todoElement.querySelector('.todo-checkbox').addEventListener('click', () => {
                                this.toggleTodo(todo.id);
                            });
                            
                            todoElement.querySelector('.todo-delete').addEventListener('click', () => {
                                this.deleteTodo(todo.id);
                            });
                            
                            this.todoList.appendChild(todoElement);
                        });
                    }
                    
                    // Обновляем счетчик
                    const activeTodos = this.todos.filter(t => !t.completed).length;
                    this.itemsLeft.textContent = `${activeTodos} ${this.getTaskWord(activeTodos)} осталось`;
                }
                
                getTaskWord(count) {
                    if (count % 10 === 1 && count % 100 !== 11) return 'задача';
                    if (count % 10 >= 2 && count % 10 <= 4 && (count % 100 < 10 || count % 100 >= 20)) return 'задачи';
                    return 'задач';
                }
                
                saveTodos() {
                    localStorage.setItem('todos', JSON.stringify(this.todos));
                }
            }
            
            // Инициализация приложений
            createParticles();
            new Calculator();
            new WeatherApp();
            new TodoApp();
        });
    </script>
</body>
</html>